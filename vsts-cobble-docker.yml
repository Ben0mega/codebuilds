# These are the steps used in a container-based build in VSTS.
steps:
- script: docker run -it --security-opt apparmor:unconfined --cap-add SYS_ADMIN
  displayName: 'Register Cobbler'

- task: docker@0
  displayName: Cobble
  inputs:
    action: 'Run an image'
    imageName: 'headmelted/cobbler'
    volumes: |
     $(Build.SourcesDirectory)/cobbler:/cobbler
     $(Build.BinariesDirectory):/build
    envVars: ${{ parameters.environmentVariables }}
    detached: false
